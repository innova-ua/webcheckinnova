<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>サイト運用＆リード活用診断</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f7fa;
      color: #222;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 24px 16px 40px;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 8px;
      color: #333;
      font-weight: 700;
    }

    h2 {
      margin-top: 24px;
      font-size: 1.4rem;
      font-weight: 600;
      color: #444;
    }

    .section-card {
      background: #fff;
      border-radius: 12px;
      padding: 24px;
      margin-top: 20px;
      box-shadow: 0 6px 24px rgba(0,0,0,0.07);
    }

    .question-number {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 4px;
    }

    .question-text {
      font-size: 1.05rem;
      margin-bottom: 16px;
    }

    .btn-primary {
      background: #0070f3;
      color: #fff;
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
      margin-right: 8px;
    }

    .btn-secondary {
      background: #e4e4e7;
      color: #333;
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      margin-top: 4px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }

    label {
      margin-top: 16px;
      display: block;
      font-size: 0.95rem;
      color: #444;
    }

    .result-section-block {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      margin-top: 24px;
      box-shadow: 0 5px 18px rgba(0,0,0,0.06);
    }

    .result-section-block h3 {
      margin-top: 0;
      font-size: 1.2rem;
      font-weight: 600;
      border-left: 4px solid #0070f3;
      padding-left: 10px;
      margin-bottom: 16px;
    }

    ul {
      padding-left: 20px;
      margin: 8px 0;
    }

    .schedule-btn {
      display:inline-block;
      background:#0070f3;
      color:#fff;
      padding:12px 20px;
      border-radius:8px;
      text-decoration:none;
      font-size:15px;
      font-weight:600;
      margin-top:16px;
    }
  </style>
</head>

<body>
<div class="container">
  <h1>サイト運用＆リード活用診断</h1>
  <p>BtoB企業の「サイト運用」と「リード活用」の現在地を可視化する簡易診断ツールです。</p>

  <!-- STEP0 -->
  <div id="info-section" class="section-card">
    <h2>STEP0：診断レポート用の情報</h2>
    <p>診断結果レポートを貴社向けに作成するため、以下を入力してください。</p>

    <label>① 会社名
      <input type="text" id="company-name" placeholder="例：〇〇株式会社" />
    </label>
    <label>② お名前（名字のみ可）
      <input type="text" id="person-name" placeholder="例：上野" />
    </label>
    <label>③ 役職
      <input type="text" id="title" placeholder="例：マーケティング部 課長" />
    </label>

    <button id="start-btn" class="btn-primary">診断をはじめる</button>
  </div>

  <!-- STEP1 -->
  <div id="question-section" class="section-card" style="display:none;">
    <h2>STEP1：10問診断（はい／いいえ）</h2>
    <p>直感でお答えいただいて大丈夫です。</p>

    <div class="question-number" id="question-number"></div>
    <div class="question-text" id="question-text"></div>

    <button id="yes-btn" class="btn-primary">はい</button>
    <button id="no-btn" class="btn-secondary">いいえ</button>

    <p id="progress-note" style="margin-top:16px;color:#777;font-size:0.9rem;"></p>
  </div>

  <!-- STEP3 -->
  <div id="result-section" style="display:none;">
    <h2>STEP3：診断結果レポート</h2>
    <div id="report-wrapper"></div>

    <button id="restart-btn" class="btn-secondary" style="margin-top:24px;">最初からやり直す</button>
  </div>
</div>

<script>
/* -----------------------
   質問などのデータ
------------------------ */
const questions = [
  "ここ1年間、Webサイトの更新が「1ヶ月以上止まっていた月」がありましたか？",
  "直近3ヶ月で「ブログ・事例・お役立ち資料」の新規が3本未満でしたか？",
  "リードへのメール配信やMA運用ができていないと感じますか？",
  "営業から事例やコンテンツの所在確認が頻繁にありますか？",
  "主要サービスごとに「問い合わせ以外のCV」が設計できていないと感じますか？",
  "Web経由リードの商談化率・受注率を追えていない／活用できていないと感じますか？",
  "運用の主担当が1人に偏っている／片手間でやっている状態ですか？",
  "「とりあえずリニューアルしたい」という話が複数回出ているがゴールが曖昧ですか？",
  "経営層・部門長に成果レポートが刺さっていないと感じますか？",
  "既存顧客向けのナレッジ発信が不足していると感じますか？"
];

const typeQuestionMap = {
  A: [0, 6],
  B: [1, 4, 9],
  C: [2, 3, 5, 7, 8]
};

const typeDefinitions = {
  A: {
    label: "A：運用属人化タイプ",
    description:
      "Web運用が少人数に依存しており、更新が止まりやすく負荷分散も難しい状態です。",
    failures: [
      "更新作業が担当者の忙しさに左右されやすい",
      "ナレッジや手順が属人化している",
      "依頼ベースでの対応が多く、全体最適がしにくい"
    ],
    actions: [
      "運用フロー（依頼→原稿→校正→公開）を明文化し、共有可能な形式にする",
      "月次更新スケジュールをあらかじめ設定しておく",
      "簡易ダッシュボードでKPIを月1だけでも共有する"
    ]
  },
  B: {
    label: "B：コンテンツ停滞タイプ",
    description:
      "コンテンツ更新が後回しになり、情報発信の鮮度が落ちやすい状態です。",
    failures: [
      "最新情報・事例・コラムの更新が止まりやすい",
      "営業が使える資料が不足し、Web活用が進みにくい",
      "コンテンツ案はあるが制作に進まない"
    ],
    actions: [
      "今期に出す3本だけテーマ・時期を決めて確定する",
      "営業・CSのFAQをそのままコンテンツ化する",
      "社内→たたき、外部パートナー→整形 の体制を検討する"
    ]
  },
  C: {
    label: "C：単発施策迷子タイプ",
    description:
      "施策ごとの粒度では動けているものの、全体像や成功基準が共有されない状態です。",
    failures: [
      "施策の成果がどこに効いたのか把握しづらい",
      "リニューアルの目的が曖昧なまま議論されがち",
      "営業からの個別依頼対応に追われがち"
    ],
    actions: [
      "まず1つのKPI（商談化数など）に絞り現状値を把握する",
      "リード→商談の流れを簡易ファネルで見える化する",
      "施策前に“どこを強化する施策か”をA4一枚で共有する"
    ]
  }
};

const questionComments = [
  "更新が止まりやすい点は優先度見直しの重要ポイントです。",
  "コンテンツ量が少ないため、テーマ設計から始めると効果的です。",
  "MA/メール運用は簡易シナリオから着手するのが近道です。",
  "営業専用の“事例・資料入り口”を作ると負荷が減ります。",
  "問い合わせ以外のCV設計が鍵になりそうです。",
  "商談化率の追い方だけ整えると成果が見えやすくなります。",
  "属人化解消はリスク低減に直結します。",
  "リニューアル目的の言語化が最初の一歩になりそうです。",
  "成果レポートは“売上にどうつながるか”の絞り込みが有効です。",
  "既存顧客向けのTips配信から着手すると改善が早いです。"
];

/* -----------------------
   状態・DOM
------------------------ */
let answers = [];
let currentQuestion = 0;
let companyName = "";
let personName = "";
let titleName = "";

const infoSection = document.getElementById("info-section");
const questionSection = document.getElementById("question-section");
const resultSection = document.getElementById("result-section");
const reportWrapper = document.getElementById("report-wrapper");

document.getElementById("start-btn").onclick = () => {
  companyName = document.getElementById("company-name").value.trim();
  personName = document.getElementById("person-name").value.trim();
  titleName = document.getElementById("title").value.trim();

  if (!companyName || !personName || !titleName) {
    alert("①会社名 ②お名前 ③役職 をすべて入力してください。");
    return;
  }

  infoSection.style.display = "none";
  questionSection.style.display = "block";
  currentQuestion = 0;
  answers = [];

  showQuestion();
};

function showQuestion() {
  document.getElementById("question-number").textContent =
    `質問 ${currentQuestion + 1} / 10`;
  document.getElementById("question-text").textContent =
    questions[currentQuestion];
  document.getElementById("progress-note").textContent =
    `ここまでの「はい」：${answers.filter(x => x === 1).length}件`;
}

document.getElementById("yes-btn").onclick = () => handleAnswer(1);
document.getElementById("no-btn").onclick = () => handleAnswer(0);

function handleAnswer(val) {
  answers.push(val);

  if (currentQuestion < 9) {
    currentQuestion++;
    showQuestion();
  } else {
    questionSection.style.display = "none";
    showResult();
  }
}

/* -----------------------
   タイプ判定 → HTML生成
------------------------ */
function calcType() {
  const scores = {
    A: typeQuestionMap.A.reduce((s, i) => s + answers[i], 0),
    B: typeQuestionMap.B.reduce((s, i) => s + answers[i], 0),
    C: typeQuestionMap.C.reduce((s, i) => s + answers[i], 0)
  };
  const max = Math.max(scores.A, scores.B, scores.C);
  if (scores.C === max) return "C";
  if (scores.A === max) return "A";
  return "B";
}

function showResult() {
  const type = calcType();
  const def = typeDefinitions[type];
  const yesList = answers.map((v,i) => v===1 ? i : null).filter(x => x !== null);
  const picked = yesList.slice(0,3);

  let html = "";

  /* 冒頭 */
  html += `
  <div class="result-section-block">
    <h3>1. 冒頭サマリー</h3>
    <p>${companyName}　${titleName} ${personName} 様<br>
    診断にご協力いただき誠にありがとうございました。<br>
    ご回答内容から拝見すると、貴社のサイト運用は
    <strong>「${def.label}」</strong> の傾向が見られました。</p>
  </div>`;

  /* タイプ説明 */
  html += `
  <div class="result-section-block">
    <h3>2. あなたのタイプ</h3>
    <p><strong>${def.label}</strong></p>
    <p>${def.description}</p>
  </div>`;

  /* 失敗パターン */
  html += `
  <div class="result-section-block">
    <h3>3. よくある失敗パターン</h3>
    <ul>
      ${def.failures.map(f => `<li>${f}</li>`).join("")}
    </ul>
  </div>`;

  /* アクション */
  html += `
  <div class="result-section-block">
    <h3>4. まず取り組むべき3つのアクション</h3>
    <ul>
      ${def.actions.map(a => `<li>${a}</li>`).join("")}
    </ul>
  </div>`;

  /* 個別コメント */
  html += `
  <div class="result-section-block">
    <h3>5. 回答内容からのコメント</h3>
    <ul>
      ${picked.length === 0
        ? "<li>特に大きな課題は顕在化していませんが、今後に向けた基盤整備が有効です。</li>"
        : picked.map(i => `<li>${questionComments[i]}</li>`).join("")}
    </ul>
  </div>`;

  /* クロージング + ボタン */
  html += `
  <div class="result-section-block">
    <h3>6. 最後に</h3>
    <p>「すぐに取り入れるかは分からないけど、確かに気になる」<br>
    もし少しでもそう感じていただけましたら、<br>
    カジュアルなオンライン相談も承っております。</p>

    <a class="schedule-btn"
       target="_blank"
       href="https://app.spirinc.com/t/CAmffWBX3ySDvtaeImHEr/as/BjBcyr7Uvsc_P0GwDuO7C/confirm">
      日程を調整する
    </a>

    <p style="margin-top:16px;">貴社の取り組みが、今後さらに前に進む一助となれば幸いです。</p>
  </div>
  `;

  reportWrapper.innerHTML = html;
  resultSection.style.display = "block";
}

/* -----------------------
   リスタート
------------------------ */
document.getElementById("restart-btn").onclick = () => {
  resultSection.style.display = "none";
  questionSection.style.display = "none";
  infoSection.style.display = "block";
};
</script>
</body>
</html>
